apiVersion: v1
kind: ConfigMap
metadata:
  name: db-init-script
  namespace: voting-app
data:
  init.sql: |
    CREATE DATABASE IF NOT EXISTS voting_app_k8s;
    USE voting_app_k8s;
    
    CREATE TABLE IF NOT EXISTS votes (
        id INT AUTO_INCREMENT PRIMARY KEY,
        vote VARCHAR(50) NOT NULL,
        timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,
        INDEX idx_vote (vote)
    );
    
    INSERT IGNORE INTO votes (vote) VALUES ('dogs'), ('cats');
