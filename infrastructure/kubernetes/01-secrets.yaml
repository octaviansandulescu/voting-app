###############################################################################
# KUBERNETES SECRETS - DATABASE CREDENTIALS
#
# IMPORTANT: In production, use Cloud SQL Proxy or Workload Identity!
# These credentials are base64 encoded (NOT encrypted!)
###############################################################################

apiVersion: v1
kind: Secret
metadata:
  name: db-credentials
  namespace: voting-app
type: Opaque
stringData:
  # NOTE: For MVP, using direct Cloud SQL IP temporarily
  # Production: Use Cloud SQL Proxy service name (cloud-sql-proxy)
  # with Workload Identity for secure IAM authentication
  # Direct IP (35.202.121.162):
  #   ❌ Not stable (may change on restart)
  #   ❌ Requires VPC peering
  #   ❌ Security risk (exposed in manifests)
  # TODO: Switch to cloud-sql-proxy service once Workload Identity is configured
  DB_HOST: "35.202.121.162"  # TODO: Replace with "cloud-sql-proxy" after Cloud SQL Proxy Workload Identity setup
  DB_PORT: "3306"
  DB_USER: "voting_user"
  DB_PASSWORD: "G@ArAV5_Sxj6kLjb=<b&!PUP)#KJH0+w"  # From Terraform
  DB_NAME: "voting_app_k8s"

---
apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
  namespace: voting-app
data:
  DEPLOYMENT_MODE: "kubernetes"
  FRONTEND_URL: "http://localhost"
  BACKEND_PORT: "8000"
  DEBUG: "False"
